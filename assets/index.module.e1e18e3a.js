var v=Object.defineProperty;var c=(e,n)=>v(e,"name",{value:n,configurable:!0});import{r as i}from"./index.1348eb7e.js";import{r as x}from"./index.ffe44a1a.js";import{a as M}from"./index.module.85272911.js";import{d as $}from"./index.module.388692be.js";function O(e,n){return i.exports.useReducer((o,r)=>{const s=n[o][r];return s!=null?s:o},e)}c(O,"$fe963b355347cc68$export$3e6543de14f8614f");const T=c(e=>{const{present:n,children:o}=e,r=E(n),s=typeof o=="function"?o({present:r.isPresent}):i.exports.Children.only(o),u=M(r.ref,s.ref);return typeof o=="function"||r.isPresent?i.exports.cloneElement(s,{ref:u}):null},"$921a889cee6df7e8$export$99c2b779aa4e8b8b");T.displayName="Presence";function E(e){const[n,o]=i.exports.useState(),r=i.exports.useRef({}),s=i.exports.useRef(e),u=i.exports.useRef("none"),p=e?"mounted":"unmounted",[l,a]=O(p,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return i.exports.useEffect(()=>{const t=N(r.current);u.current=l==="mounted"?t:"none"},[l]),$(()=>{const t=r.current,m=s.current;if(m!==e){const A=u.current,f=N(t);e?a("MOUNT"):f==="none"||(t==null?void 0:t.display)==="none"?a("UNMOUNT"):a(m&&A!==f?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,a]),$(()=>{if(n){const t=c(d=>{const f=N(r.current).includes(d.animationName);d.target===n&&f&&x.exports.flushSync(()=>a("ANIMATION_END"))},"handleAnimationEnd"),m=c(d=>{d.target===n&&(u.current=N(r.current))},"handleAnimationStart");return n.addEventListener("animationstart",m),n.addEventListener("animationcancel",t),n.addEventListener("animationend",t),()=>{n.removeEventListener("animationstart",m),n.removeEventListener("animationcancel",t),n.removeEventListener("animationend",t)}}else a("ANIMATION_END")},[n,a]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:i.exports.useCallback(t=>{t&&(r.current=getComputedStyle(t)),o(t)},[])}}c(E,"$921a889cee6df7e8$var$usePresence");function N(e){return(e==null?void 0:e.animationName)||"none"}c(N,"$921a889cee6df7e8$var$getAnimationName");export{T as $};
//# sourceMappingURL=index.module.e1e18e3a.js.map
